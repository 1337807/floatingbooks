<h1>Listing books</h1>

<table>
  <tr>
    <th>Isbn</th>
    <th>Name</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  <tr>
    <td>All Books</td>
  </tr>
  <% Book.find(:all, :order => 'name').each do |book| %>
  <tr>
    <td><%= book.isbn %></td>
    <td><%= book.name %></td>
    <td><%= link_to 'Show', book %></td>
    <td><%= button_to 'Destroy', {:controller => :books, :action => 'destroy', :id => book.id}, :method => :delete, :confirm => 'Are you sure?' %></td>
  </tr>
<% end %>
<tr>
  <td>Checked out books</td>
</tr>
<% current_user.checked_out_items.each do |book| %>
  <tr>
    <td><%= book.isbn %></td>
    <td><%= book.name %></td>
    <td><%= link_to 'Return', return_path(book.isbn) %></td> 
  </tr>
<% end %>

<tr>
  <td>Your books</td>
</tr>
<% current_user.books.each do |book| %>
  <tr>
    <td><%= book.isbn %></td>
    <td><%= book.name %></td>
    <td><%= link_to 'Checkout', checkout_path(book.isbn) %></td> 
    <td><%= link_to 'Show', book %></td>
    <td><%= link_to 'Edit', edit_book_path(book) %></td>
    <td><%= link_to 'Destroy', book, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>

</table>

<br />

<%= link_to 'New Book', new_book_path %>
